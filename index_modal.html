<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestão de Projetos</title>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="styles.css">

    <style>
        /* Fundo escuro do modal */
    </style>
</head>

<body>
    <div id="login-screen"
        style="display: flex; height: 100vh; align-items: center; justify-content: center; background: #f0f2f5;">
        <div class="card" style="width: 100%; max-width: 500px; padding: 40px; text-align: center;">
            <div style="margin-bottom: 30px;">
                <h1 style="color: #4361ee;"><i class="fas fa-layer-group"></i> Gestão de Projetos</h1>
            </div>
            <div style="margin-bottom: 15px; text-align: left;">
                <label>Email</label>
                <input type="email" id="emailInput" class="form-control" placeholder="admin@empresa.com">
            </div>
            <div style="margin-bottom: 25px; text-align: left;">
                <label>Senha</label>
                <input type="password" id="passwordInput" class="form-control" placeholder="******">
            </div>
            <button id="loginBtn" class="btn btn-primary" style="width: 100%;">Entrar</button>
        </div>
    </div>

    <div id="app-content" class="container" style="display: none;">
        <header>
            <h1><i class="fas fa-layer-group"></i> Painel de Controle</h1>
            <button id="logoutBtn" class="btn btn-danger btn-extra-small"
                style="position: absolute; top: 20px; right: 20px;">Sair</button>
        </header>

        <div class="tab-navigation">
            <div id="tabIndicator" class="tab-indicator"></div>
            <button class="tab-button active" data-tab="dashboard"><i class="fas fa-chart-line"></i> Dashboard</button>
            <button class="tab-button" data-tab="members"><i class="fas fa-users"></i> Membros</button>
            <button class="tab-button" data-tab="projects"><i class="fas fa-project-diagram"></i> Projetos</button>
            <button class="tab-button" data-tab="tests"><i class="fas fa-vial"></i> Testes</button>
            <button class="tab-button" data-tab="scrum"><i class="fas fa-user-shield"></i> Scrum</button>
            <button class="tab-button" data-tab="activities"><i class="fas fa-list-check"></i> Extras</button>
        </div>

        <div id="dashboard" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalMembers">0</div>
                    <div>Membros</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalProjects">0</div>
                    <div>Projetos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="activeTestsCount">0</div>
                    <div>Testes Ativos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgOverload">0</div>
                    <div>Sobrecarga Média</div>
                </div>
            </div>

            <div class="card">
                <h2><i class="fas fa-table"></i> Detalhamento de Carga</h2>
                <div class="table-container">
                    <table id="workloadTable">
                        <thead>
                            <tr>
                                <th>Membro</th>
                                <th>Projetos</th>
                                <th>Scrum</th>
                                <th style="color: #ff9f1c">Testes</th>
                                <th>Extras</th>
                                <th>Total</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="workloadList"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="members" class="tab-content">


            <div class="card">
                <h2>Membros Cadastrados</h2>
                <div class="table-container">
                    <table id="membersTable">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Cargo</th>
                                <th>Email</th>
                                <th>Carga</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="membersList"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="projects" class="tab-content">
            <div class="header-actions">
                <button class="btn-add-floating" onclick="openModal('modalProject')">
                    <i class="fas fa-plus"></i> Novo Projeto
                </button>
            </div>
            <div id="projectsList">
            </div>
        </div>

        <div id="tests" class="tab-content">
            <div class="header-actions">
                <button class="btn-add-floating btn-add-test" onclick="openModal('modalTest')">
                    <i class="fas fa-plus"></i> Novo Teste
                </button>
            </div>
            <div class="card">
                <h2>Testes em Andamento e Histórico</h2>
                <div class="table-container">
                    <table id="testsTable">
                        <thead>
                            <tr>
                                <th>Teste</th>
                                <th>Projeto</th>
                                <th>Membros</th>
                                <th>Carga</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="testsList"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="scrum" class="tab-content">
            <div class="header-actions">
                <button class="btn-add-floating btn-add-scrum" onclick="openModal('modalScrum')">
                    <i class="fas fa-crown"></i> Definir Scrum Master
                </button>
            </div>
            <div class="card">
                <h2>Scrum Masters Definidos</h2>
                <div class="table-container">
                    <table id="scrumTable">
                        <thead>
                            <tr>
                                <th>Projeto</th>
                                <th>Scrum Master</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="scrumList"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="activities" class="tab-content">
            <div class="header-actions">
                <button class="btn-add-floating btn-add-activity" onclick="openModal('modalActivity')">
                    <i class="fas fa-plus"></i> Nova Atividade
                </button>
            </div>
            <div class="card">
                <h2>Atividades Extras</h2>
                <div class="table-container">
                    <table id="activitiesTable">
                        <thead>
                            <tr>
                                <th>Atividade</th>
                                <th>Membros</th>
                                <th>Pts</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="activitiesList"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="modalMember" class="modal-overlay">
        <div class="modal-content" style="border-color: #4361ee;">
            <button class="btn-close-modal" onclick="closeModal('modalMember')">&times;</button>
            <h2><i class="fas fa-user"></i> Gerenciar Membro</h2>
            <form id="memberForm">
                <input type="hidden" id="memberId">
                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" id="memberName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Cargo</label>
                    <select id="memberRole" class="form-control" required>
                        <option value="">Selecione...</option>
                        <option value="Desenvolvedor Frontend">Desenvolvedor Frontend</option>
                        <option value="Desenvolvedor Backend">Desenvolvedor Backend</option>
                        <option value="Desenvolvedor Fullstack">Desenvolvedor Fullstack</option>
                        <option value="Designer UX/UI">Designer UX/UI</option>
                        <option value="QA / Tester">QA / Tester</option>
                        <option value="Gerente de Projetos">Gerente de Projetos</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="memberEmail" class="form-control">
                </div>
                <button type="submit" class="btn btn-success" style="width:100%">Salvar Membro</button>
            </form>
        </div>
    </div>

    <div id="modalProject" class="modal-overlay">
        <div class="modal-content" style="border-color: #4361ee;">
            <button class="btn-close-modal" onclick="closeModal('modalProject')">&times;</button>
            <h2><i class="fas fa-project-diagram"></i> Gerenciar Projeto</h2>
            <form id="projectForm">
                <input type="hidden" id="projectId">
                <div class="form-group">
                    <label>Nome do Projeto</label>
                    <input type="text" id="projectName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Descrição</label>
                    <textarea id="projectDescription" class="form-control"></textarea>
                </div>
                <div class="form-group">
                    <label>Pontos de Carga: <span id="pointsValue">5</span></label>
                    <input type="range" id="overloadPoints" class="form-control" min="1" max="10" value="5">
                </div>
                <div class="form-group">
                    <label>Alocar Membros</label>
                    <div id="memberAllocationCheckboxes" class="checkbox-group"></div>
                </div>
                <button type="submit" class="btn btn-success" style="width:100%">Salvar Projeto</button>
            </form>
        </div>
    </div>

    <div id="modalTest" class="modal-overlay">
        <div class="modal-content" style="border-color: #ff9f1c;">
            <button class="btn-close-modal" onclick="closeModal('modalTest')">&times;</button>
            <h2><i class="fas fa-vial"></i> Gerenciar Teste</h2>
            <form id="testForm">
                <div class="form-group">
                    <label>Projeto Vinculado</label>
                    <select id="testProjectSelect" class="form-control" required></select>
                </div>
                <div class="form-group">
                    <label>Nome do Teste</label>
                    <input type="text" id="testName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Sobrecarga: <span id="testPointsVal">3</span></label>
                    <input type="range" id="testPoints" class="form-control" min="1" max="10" value="3">
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select id="testStatus" class="form-control">
                        <option value="em_andamento">Em Andamento</option>
                        <option value="concluido">Concluído</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Membros Alocados</label>
                    <div id="testMembersChecks" class="checkbox-group"></div>
                </div>
                <button type="submit" class="btn btn-add-test" style="width:100%">Salvar Teste</button>
            </form>
        </div>
    </div>

    <div id="modalScrum" class="modal-overlay">
        <div class="modal-content" style="border-color: #7209b7;">
            <button class="btn-close-modal" onclick="closeModal('modalScrum')">&times;</button>
            <h2><i class="fas fa-crown"></i> Definir Scrum Master</h2>
            <form id="scrumForm">
                <div class="form-group">
                    <label>Projeto</label>
                    <select id="scrumProject" class="form-control" required></select>
                </div>
                <div class="form-group">
                    <label>Membro (Scrum Master)</label>
                    <select id="scrumMember" class="form-control" required></select>
                </div>
                <button type="submit" class="btn btn-purple" style="width:100%">Salvar Definição</button>
            </form>
        </div>
    </div>

    <div id="modalActivity" class="modal-overlay">
        <div class="modal-content" style="border-color: #f72585;">
            <button class="btn-close-modal" onclick="closeModal('modalActivity')">&times;</button>
            <h2><i class="fas fa-list-check"></i> Atividade Extra</h2>
            <form id="activityForm">
                <input type="hidden" id="activityId">
                <div class="form-group">
                    <label>Nome da Atividade</label>
                    <input type="text" id="activityName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Descrição</label>
                    <textarea id="activityDescription" class="form-control"></textarea>
                </div>
                <div class="form-group">
                    <label>Membros Alocados</label>
                    <div id="activityMembersContainer" class="checkbox-group">
                    </div>
                </div>
                <div class="form-group">
                    <label>Pontos: <span id="activityPointsValue">3</span></label>
                    <input type="range" id="activityPoints" class="form-control" min="1" max="5" value="3">
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select id="activityStatus" class="form-control">
                        <option value="ativa">Ativa</option>
                        <option value="concluida">Concluída</option>
                    </select>
                </div>
                <button type="submit" id="activitySubmitBtn" class="btn btn-add-activity" style="width:100%">Salvar
                    Atividade</button>
            </form>
        </div>
    </div>

    <div id="confirmModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 400px; text-align: center;">
            <h3 style="color: #e74c3c"><i class="fas fa-exclamation-triangle"></i> Atenção</h3>
            <p id="confirmMessage" style="margin: 20px 0;">Tem certeza?</p>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="btn btn-danger" id="confirmDeleteBtn">Sim, Excluir</button>
                <button class="btn btn-info" id="cancelDeleteBtn"
                    onclick="document.getElementById('confirmModal').classList.remove('active')">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="floatingAlert" class="floating-alert"></div>

    <script src="config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script src="js/supabase.js"></script>
    <script src="js/auth.js"></script>


    <script src="js/app.js"></script>
    <script src="js/membros.js"></script>
    <script src="js/projetos.js"></script>
    <script src="js/atividades_extras.js"></script>
    <script src="js/dashboard.js"></script>

    <script src="js/testes.js"></script>

    <script>

    </script>
</body>

</html>